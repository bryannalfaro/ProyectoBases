<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="cambiar_rol.css"
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="card-container">
        <div class="upper-container">
            <div class="image-container">
                <img src="logo.png"/>
            </div>


        </div>
        <div class="lower-container">
            <div>
                <h3>Indica tu rol: </h3>
            </div>
            <div>
                <input type="radio" name="usuario" id="manager" checked="checked">
                <label for="manager">Manager</label>

                <input type="radio" name="usuario" id="artista">
                <label for="artista">Artista</label>

                <input type="text" class="nombre" style="margin: 40px;" placeholder="Escribe tu alias" id="nombre">

            </div>
            <div>
                <a href="#" class="btn2" style="margin:5px" onclick="userRole()">Guardar</a>
            </div>
        </div>


    </div>

    <script>
        function userRole(){
            var userSelect = document.getElementById('artista').checked
            console.log(userSelect)
            var userSelect2 = document.getElementById('manager').checked
            console.log(userSelect2)
            var inputName = document.getElementById('nombre').value
            console.log(inputName)

            if(userSelect===true){
                fetch('https://cryptic-sea-85662.herokuapp.com/api/user/postArtist/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            nombre: userName,
                            contrasena: userPass,
                            edad: userAge,
                            pais: userCountry,
                            premium:'No',
                            administrador: userRole
                        })

                    } ).then(response => response.json()).then(response => {
                        console.log(response)
                        window.localStorage.setItem("userR", JSON.stringify(response));
                        console.log(JSON.parse(window.localStorage.getItem("userR")));
                    })

            }else{

                fetch('https://cryptic-sea-85662.herokuapp.com/api/user/postManager/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            nombre: userName,
                            contrasena: userPass,
                            edad: userAge,
                            pais: userCountry,
                            premium:'No',
                            administrador: userRole
                        })

                    } ).then(response => response.json()).then(response => {
                        console.log(response)
                        window.localStorage.setItem("userR", JSON.stringify(response));
                        console.log(JSON.parse(window.localStorage.getItem("userR")));
                    })

            }
        }
    </script>
</body>
</html>